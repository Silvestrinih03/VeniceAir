<!DOCTYPE html>
<html>
    <head>
        <title>Gerenciamento de Aeronaves</title>
    </head>
    <body>
        <h1>Gerenciamento de Aeronaves</h1>

        <h2>Listar Aeronaves</h2>
        <button onclick="listarAeronaves()">Listar Aeronaves</button>
        <div id="listagemAeronaves"></div>

        <h2>Inserir Aeronave</h2>
        <form id="inserirAeronaveForm">
            Fabricante: <input type="text" id="fabricante" required><br>
            Modelo: <input type="text" id="modelo" required><br>
            Ano de Fabricação: <input type="number" id="anofab" required><br>
            Quantidade de Assentos: <input type="number" id="qtdeAssentos" required><br>
            <button type="submit">Inserir Aeronave</button>
        </form>
        <div id="inserirAeronaveResult"></div>

        <script>
            async function listarAeronaves() {
                const listagemAeronaves = document.getElementById('listagemAeronaves');
                listagemAeronaves.innerHTML = 'Carregando...';

                const response = await fetch('/listarAeronaves');
                const data = await response.json();

                if (data.status === 'SUCCESS') {
                    const aeronaves = data.payload;
                    const html = aeronaves.map(aeronave => {
                        return `<div>ID: ${aeronave[0]}, Fabricante: ${aeronave[1]}, Modelo: ${aeronave[2]}</div>`;
                    }).join('');
                    listagemAeronaves.innerHTML = html;
                } else {
                    listagemAeronaves.innerHTML = 'Erro ao listar aeronaves.';
                }
            }

            const inserirAeronaveForm = document.getElementById('inserirAeronaveForm');
            const inserirAeronaveResult = document.getElementById('inserirAeronaveResult');

            inserirAeronaveForm.addEventListener('submit', async (event) => {
                event.preventDefault();

                const fabricante = document.getElementById('fabricante').value;
                const modelo = document.getElementById('modelo').value;
                const anofab = document.getElementById('anofab').value;
                const qtdeAssentos = document.getElementById('qtdeAssentos').value;

                const response = await fetch('/inserirAeronave', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ fabricante, modelo, anofab, qtdeAssentos })
                });

                const data = await response.json();

                if (data.status === 'SUCCESS') {
                    inserirAeronaveResult.innerHTML = 'Aeronave inserida com sucesso.';
                } else {
                    inserirAeronaveResult.innerHTML = 'Erro ao inserir aeronave.';
                }
            });
        </script>
    </body>
</html>
